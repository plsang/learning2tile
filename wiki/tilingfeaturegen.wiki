== User Guild ==

This article introduces the guild to generate the spatial BoW feature for a tiling.

== 1) Find a optimal tiling ==
Suppose we generate this report (see for how to generate it) and we find that <> is the promising tiling.

== 2) Set the environment variables (Optional) ==
Suppose we installed R at "C:\Program Files\R\R-2.15.2\bin" on Windows, we add this variable to the "Path". 

See [http://www.divms.uiowa.edu/help/windows/RPackage.html here] for more information.

On Linux suppose the R home directory is "/data/MM2/R/bin", type

{{{
export PATH=${PATH}:/data/MM2/R/bin
}}} 

See [http://www.cyberciti.biz/faq/set-environment-variable-linux/ here] for more information.

== 3) Download the source package ==
 # Unzip the archive in a folder:
    * a txyc file is the mapping file from centroids to each interest  point's SIFT features. Every image has a txyc file. For example "HVC7.txyc" looks like
      {{{
       10 7 431 569 152 874 504 796 587 37 570 381
       16 7 729 940 600 942 13 992 751 795 945 273
       22 7 316 955 353 163 351 596 570 856 385 432
       28 7 768 203 771 527 477 634 968 847 641 963
       34 7 914 587 120 442 520 714 403 483 569 401
      }}}
     Each row corresponds to a interest point and the first two dimension denotes the point's (x,y) coordinates. The following 10 dimensions list the top 10 nearest centroid IDs (centroid ID starting from 0).
    * The files in the code folder are the source code.
    * "labels.labels" is the class label file.
    * "partition[1-5].par" are the training and test partitions used in the cross validation.

== 3) Config the experiment ==
<code language="R">
args <- commandArgs(TRUE)

if(length(args) != 1) {
	print("Usage: spatialBoW TILING_MEMBERSHIP")
	print("  TILING_MEMBERSHIP is a string indicating the experiment.")
	quit()
}
if(Sys.info()["sysname"] == "Windows") {
	FILE.SEPERATOR = "\\"
} else {
	FILE.SEPERATOR = "/"
}

TILING_MEMBERSHIP = as.numeric(strsplit(args[1],"_")[[1]])
print(paste("tiling ",args[1], sep=""))
WORKING_DIR = "data/txyc1024.list"
TILING_STYLE = "square"
TARGET_DIR = paste("/data/MM2/lujiang/learning2tile/15scene/dexps",FILE.SEPERATOR,TILING_STYLE,FILE.SEPERATOR,args[1],sep="")
DIM = 1024
TILING_PARA = c(4,4)
SOFTMEMBERSHIP_PARA = c(1,0,0,0,0,0,0,0,0,0)

source("code/image_main_tiling_membership.r")
</code>

== Discussion ==

Add your content here.  Format your content with:
  * Text in *bold* or _italic_
  * Headings, paragraphs, and lists
  * Automatic links to other wiki pages